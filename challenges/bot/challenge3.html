---
layout: site
title: "Hedgehog Bot: Challenge 3"
---
<div id="header" class="white-background">
  <h1>Challenge 3 - Wifi</h1>
</div>

<div class="content-section-container">
  <div id="faq" class="content-section">
    <p><font size="4">This is the third challenge - Time to control your robot wirelessly!
        <table><tr><td valign="top">
              <td width=33.3333%>
                <h4>You'll need:</h4>
                <ul><li>Micro USB Cable
                    <li>A built hedgehog bot!
                      <td width=33.3333%><img src="{{ site.baseurl }}/assets/media/microusb.jpg">
                        <td width=33.3333%><img src="{{ site.baseurl }}/assets/media/v2.jpg">
                      </tr></table>
                      <hr>
                      <h4>1. If statement </h4>
                      <p><font size="4">For this Challenge, you need to learn about <b>if</b> statements.
                          <br>An if statement is saying "<b>if</b> this condition, then do this". For example:
                          <code><br><font size="5">
                              <br><font color="#728E00">if <font color = "black">(x = 1) {
                                  <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">smile<font color="black">();<font color="#95A5A6"> // if x is 1 then draw a smile face on the screen
                                            <br><font color="black">}
                                              <br></code><font size="4">
                                              <font color="#7c8081"><p>You can also do <b>else if</b> statements. 
                                                  <br>It's like saying "<b>else if</b> this condition, then do this." 
                                                  <br>You write them following on from if statements. Here's an example:
                                                  <br><code><font size="5">
                                                      <br><font color="#728E00">if <font color = "black">(x = 1) {
                                                          <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">smile<font color="black">(); <font color="#95A5A6"> // if x is 1 then draw a smile face on the screen
                                                                    <br><font color="black">}
                                                                      <br>
                                                                      <br><font color="#728E00">else if <font color = "black">(x = 2) {
                                                                          <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">wink<font color="black">(); <font color="#95A5A6"> // else if x is 2 then draw a wink face on the screen
                                                                                    <br><font color="black">}
                                                                                      <br>
                                                                                      <br><font color="#728E00">else if <font color = "black">(x = 3) {
                                                                                          <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">frown<font color="black">(); <font color="#95A5A6"> // else if x is 4 then draw a frown face on the screen
                                                                                                    <br><font color="black">}</code>
                                                                                                    <hr>
                                                                                                    <h4>2. Wifi Remote </h4>
                                                                                                    <p><font size="4">You'll be using your phone or computer to remote control your robot over wifi! 
                                                                                                        <p>You'll be clicking different buttons to tell the robot what to do.
                                                                                                          <p>Here's what the web remote looks like:
                                                                                                            <p><img src="{{ site.baseurl }}/assets/media/remote.png">
                                                                                                              <p>In the code, you'l need to create else if statements to tell the robot what to do for the different buttons you press.
                                                                                                                <p>Here's an example for turning the motor right:
                                                                                                                  <code><font size="5"><br>
                                                                                                                      <br><font color="#728E00">else if<font color="black"> (contains(webPage, <font color="#00979C">"right"<font color="black">)) {
                                                                                                                              <br>&nbsp;&nbsp;<font color="#D35400">Motor<font color="black">.<font color="#D35400">right<font color="black">();
                                                                                                                                      <br><font color="black">}
                                                                                                                                      </code>
                                                                                                                                      <hr>
                                                                                                                                      <h4>3. Wifi Code </h4>
                                                                                                                                      <p><font size="4">Below is the code for wifi enabling hedgehog bot. Copy and paste it into Arduino.
                                                                                                                                          <p>
                                                                                                                                            <img src="{{ site.baseurl }}/assets/media/ide-top.png"/>
                                                                                                                                            <code><font size="3">
                                                                                                                                                <br><font color="#728E00">#include <font color="#00979C">"drawFace.h"
                                                                                                                                                    <br><font color="#728E00">#include <font color="#00979C">"espDualStepper.h"
                                                                                                                                                        <br><font color="#728E00">#include <font color="#00979C">"ESP8266WiFi.h"
                                                                                                                                                            <br><font color="#728E00">#include <font color="#00979C">"WebServer.h"
                                                                                                                                                                <br><font color="#728E00">#include <font color="#00979C">"StringUtils.h"
                                                                                                                                                                    <br>
                                                                                                                                                                    <br><font color="#00979C">char <font color ="black">wifiname[] = <font color="#00979C">"wifiname"<font color ="black">;<font color="#95A5A6"> // ***Type in the WiFi name in the quotes***
                                                                                                                                                                              <br><font color="#00979C">char <font color ="black">password[] = <font color="#00979C">"password"<font color ="black">;<font color="#95A5A6"> // ***Type in the Wifi password in the quotes***
                                                                                                                                                                                        <br><font color="#00979C">char <font color ="black">ipString[24];
                                                                                                                                                                                            <br>
                                                                                                                                                                                            <br><font color="#D35400">WiFiServer <b>Server</b><font color ="black">(80);
                                                                                                                                                                                                <br>
                                                                                                                                                                                                <br><font color="#00979C">void <font color="#728E00">setup<font color="black">() {
                                                                                                                                                                                                      <br>&nbsp;&nbsp;<font color="#D35400">Motor<font color="black">.<font color="#D35400">start<font color="black">(D8, D7, D6, D5, D4, D3, D0, RX);<font color="#95A5A6"> // set up motors
                                                                                                                                                                                                                <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">start<font color="black">();<font color="#95A5A6"> // set up screen
                                                                                                                                                                                                                          <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">print<font color="black">(<font color="#00979C">"Connecting to "<font color="black">);
                                                                                                                                                                                                                                      <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">println<font color="black">(wifiname);
                                                                                                                                                                                                                                              <br>&nbsp;&nbsp;<font color="#D35400"><b>WiFi</b><font color="black">.<font color="#D35400">begin<font color="black">(wifiname, password);<font color="#95A5A6"> // begin connecting to wifi
                                                                                                                                                                                                                                                        <br>&nbsp;&nbsp;	
                                                                                                                                                                                                                                                        <br>&nbsp;&nbsp;<font color="#728E00">while<font color="black">(<font color="#D35400"><b>WiFi</b><font color="black">.<font color="#D35400">status<font color="black">() != WL_CONNECTED) {<font color="#95A5A6"> // != means not equal to. 
                                                                                                                                                                                                                                                                      <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#D35400">delay<font color="black">(500);<font color="#95A5A6"> // so this means while the wifi is not connected 
                                                                                                                                                                                                                                                                            <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">print<font color="black">(<font color="#00979C">"."<font color="black">);<font color="#95A5A6"> // print a "." to the screen 
                                                                                                                                                                                                                                                                                          <br>&nbsp;&nbsp;<font color="black">}
                                                                                                                                                                                                                                                                                            <br>&nbsp;&nbsp;
                                                                                                                                                                                                                                                                                            <br>&nbsp;&nbsp;<font color="#D35400"><b>Server</b><font color="black">.<font color="#D35400">begin<font color="black">();<font color="#95A5A6"> // make the bot into a server so it can be controlled
                                                                                                                                                                                                                                                                                                      <br>&nbsp;&nbsp;<font color="#D35400"><b>IPAddress</b><font color="black"> myIp = <font color="#D35400"><b>WiFi</b><font color="black">.<font color="#D35400">localIP<font color="black">();
                                                                                                                                                                                                                                                                                                                  <br>&nbsp;&nbsp;<font color="#D35400">sprintf<font color="black">(ipString, <font color="#00979C">"%d.%d.%d.%d"<font color="black">, myIp[0], myIp[1], myIp[2], myIp[3]);
                                                                                                                                                                                                                                                                                                                          <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">println<font color="black">(<font color="#00979C">"IP:"<font color="black">);
                                                                                                                                                                                                                                                                                                                                      <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">print<font color="black">(ipString);
                                                                                                                                                                                                                                                                                                                                              <br><font color="black">}
                                                                                                                                                                                                                                                                                                                                                <br>
                                                                                                                                                                                                                                                                                                                                                <br><font color="#00979C">void <font color="#728E00">loop<font color="black">() {
                                                                                                                                                                                                                                                                                                                                                      <br>&nbsp;&nbsp;<font color="#D35400">WiFiClient client <font color="black"> = <font color="#D35400"><b>Server</b><font color="black">.<font color="#D35400">available<font color="black">();
                                                                                                                                                                                                                                                                                                                                                                  <br>&nbsp;&nbsp;<font color="#728E00">if<font color="black">(!<font color="#D35400">client<font color="black">) {
                                                                                                                                                                                                                                                                                                                                                                          <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#728E00">return<font color="black">;
                                                                                                                                                                                                                                                                                                                                                                              <br>&nbsp;&nbsp;<font color="black">}
                                                                                                                                                                                                                                                                                                                                                                                <br>&nbsp;&nbsp;<font color="#728E00">while<font color="black">(!<font color="#D35400">client<font color="black">.<font color="#D35400">available<font color="black">()) {
                                                                                                                                                                                                                                                                                                                                                                                            <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#D35400">delay<font color="black">(1);
                                                                                                                                                                                                                                                                                                                                                                                                <br>&nbsp;&nbsp;<font color="black">}
                                                                                                                                                                                                                                                                                                                                                                                                  <br>&nbsp;&nbsp;<font color="#00979C">String <font color="black">webPage = <font color="#D35400">client<font color="black">.<font color="#D35400">readStringUntil<font color="black">(<font color="#00979C">'\r'<font color="black">);
                                                                                                                                                                                                                                                                                                                                                                                                                  <br>&nbsp;&nbsp;<font color="#D35400">client<font color="black">.<font color="#D35400">flush<font color="black">();
                                                                                                                                                                                                                                                                                                                                                                                                                          <br>&nbsp;&nbsp;
                                                                                                                                                                                                                                                                                                                                                                                                                          <br>&nbsp;&nbsp;<font color="#728E00">if<font color="black"> (contains(webPage, <font color="#00979C">"smile"<font color="black">)) {
                                                                                                                                                                                                                                                                                                                                                                                                                                  <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">smile<font color="black">();<font color="#95A5A6"> // if you click the smile button, draw a smile on screen
                                                                                                                                                                                                                                                                                                                                                                                                                                            <br>&nbsp;&nbsp;<font color="black">}
                                                                                                                                                                                                                                                                                                                                                                                                                                              <br>&nbsp;&nbsp;
                                                                                                                                                                                                                                                                                                                                                                                                                                              <br>&nbsp;&nbsp;<font color="#95A5A6">// ***insert your else if statements here!***
                                                                                                                                                                                                                                                                                                                                                                                                                                                <br>&nbsp;&nbsp;
                                                                                                                                                                                                                                                                                                                                                                                                                                                <br>&nbsp;&nbsp;<font color="#D35400">client<font color="black">.<font color="#D35400">print<font color="black">(getWebPageHtml());
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <br>&nbsp;&nbsp;<font color="#D35400">client<font color="black">.<font color="#D35400">flush<font color="black">();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <br>&nbsp;&nbsp;<font color="#D35400">delay<font color="black">(1);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <br><font color="black">}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </code>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <img src="{{ site.baseurl }}/assets/media/ide-bottom.png"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <font color="#7c8081"><font size="4">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <h4>4. Wifi Test </h4>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <ol><li><font size="4">Change the wifi name and password near the top of the code in the quotes to the one given to you by a helper
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <ul><li>This is a special wifi password just for this workshop!</ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <li><font size="4">Press the upload <img src="{{ site.baseurl }}/assets/media/upload.png"/> button. You'll see a the code compiling and uploading in the black box at the bottom.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li>When it's done you should see 'Done uploading' just above the black box. 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <p><font size="4">You should see the screen saying connecting to wifi! Wait for it to connect.</ol>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <p><font color="red">If it doesn't connect, check you've got the wifi name and password right and ask a helper.<font color="#7c8081">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <h4>5. Remote Control </h4>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <p><font size="4">Once the robot is connected to the wifi it will say something like "IP:192.168.1.123"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <ol><li><font size="4">Choose a device you want to use as a remote control for the hedgehog bot - maybe your phone, or your laptop.. something with wifi.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li>Connect that device to the same wifi network as you connected hedgehog bot to.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <li>Open a web browser on that device 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <li>type in the IP address that's on your hedgehog bot screen (the number that's like 192.168.1.123) and go to that page like it's a website.</ol>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <p><img src="{{ site.baseurl }}/assets/media/remote.png">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <p><font size="4">If all has gone well, a remote control will pop up. 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <p>Only the smile button should work. If you click it, a smile should show on the screen of your bot!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <h4>6. Else if commands </h4>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p><font size="4">Now it's time to program the other remote control buttons! Back to the code.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <p><font size="5"><font color = "red">In the loop, create <b>else if</b> statements for all these commands:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <p align="center"><img src="{{ site.baseurl }}/assets/media/commands2.png"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <font color="#7c8081"><font size="4">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>Here's an example for drawing a frown on the screen:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <code><font size="5"><br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <br><font color="#728E00">else if<font color="black"> (contains(webPage, <font color="#00979C">"frown"<font color="black">)) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <br>&nbsp;&nbsp;<font color="#D35400">Draw<font color="black">.<font color="#D35400">frown<font color="black">();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <br><font color="black">}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </code>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <p><font color="#7c8081"><font size="4">Upload the code and test out the remote. Have you managed to get all the buttons to work?
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <p>Don't forget the stop button, otherwise your motors will move forever!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <p><font color="red">As always, if you're stuck, ask a workshop helper for help!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <font color="#7c8081">

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <div id="sponsors" class="content-section-container light-grey-background">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <p align="center"><font size="6"><font color="#7c8081">Challenge 3 Complete!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <p align="center"><font size="4">This is the end of the workshop. 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p align="center">Further challenges will be available on this website in the future.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <table><tr><td valign="top">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <td width=33.3333%><u><font size="5"><center><a title="Challenge 2" href="http://www.hedgehogbot.co.uk/challenge2.html">← Challenge 2</a></u>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <td width=33.3333%><u><font size="5"><center><a title="Hedgehog Bot" href="http://www.hedgehogbot.co.uk/">Home</a></u>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td width=33.3333%>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </tr></table>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
